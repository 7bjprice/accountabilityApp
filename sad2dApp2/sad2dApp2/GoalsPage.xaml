<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="sad2dApp2.GoalsPage"
             Title="Goals">

    <Grid RowDefinitions="*,Auto">
        <ScrollView Grid.Row="0">
            <VerticalStackLayout Padding="20" Spacing="20">

                <!-- Header -->
                <Border Stroke="LightGray"
                        StrokeThickness="1"
                        Background="LightGreen"
                        Padding="20"
                        Margin="10"
                        StrokeShape="RoundRectangle 12">
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="5,5" Radius="10" Opacity="0.3" />
                    </Border.Shadow>
                    <VerticalStackLayout>
                        <Label Text="Inspirational Quote" FontSize="18" TextColor="White" FontAttributes="Bold" Margin="0,0,0,10" />
                        <Label x:Name="QuoteLabel" Text="Loading..." FontSize="16" FontAttributes="Italic" TextColor="White" HorizontalOptions="Center" HorizontalTextAlignment="Center" Margin="10,0" />
                        <Label x:Name="TotalGoalsLabel" Text="Set Your Why" FontSize="28" FontAttributes="Bold" TextColor="White" HorizontalOptions="Center" Margin="0,10,0,0"/>
                    </VerticalStackLayout>
                </Border>

                <!-- Set Overall Goals Button -->
                <Button x:Name="SetGoalsBtn"
                        Text="Set Your Reason Why"
                        BackgroundColor="#4CAF50"
                        TextColor="White"
                        CornerRadius="10"
                        HeightRequest="40"
                        Clicked="OnSetGoalsClicked" />

                <!-- Daily Goals -->
                <Label Text="Daily Goals" FontSize="22" FontAttributes="Bold" TextColor="DarkGreen" />
                <CollectionView x:Name="DailyGoalsList">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Frame BackgroundColor="#E8F5E9" CornerRadius="10" Padding="10" Margin="5">
                                    <VerticalStackLayout Spacing="6">
                                        <!-- Goal text and numeric progress -->
                                        <Grid ColumnDefinitions="*,Auto,Auto" VerticalOptions="Center">
                                            <Label Text="{Binding Category}" FontSize="18" TextColor="Black" Grid.Column="0"/>
                                            <Label Text="{Binding ProgressText}" FontSize="16" TextColor="Black" Grid.Column="1" HorizontalTextAlignment="End"/>
                                        <!-- Edit/Delete buttons -->
                                        
                                        <HorizontalStackLayout Spacing="8" HorizontalOptions="End">

                                    
                                   
                                        <Label Text="{Binding Progress}" FontSize="16" TextColor="Black" VerticalOptions="Center" Grid.Column="1"/>
                                            <Button Text="✓" Clicked="OnGoalCompleteClicked" WidthRequest="40" HeightRequest="40" Grid.Column="2"/>
                                            <ImageButton Source="edit_icon.png" CommandParameter="{Binding .}" Clicked="OnRenameGoalClicked" WidthRequest="26" HeightRequest="26" BackgroundColor="Transparent"/>
                                            <ImageButton Source="trash_icon.png" CommandParameter="{Binding .}" Clicked="OnDeleteGoalClicked" WidthRequest="26" HeightRequest="26" BackgroundColor="Transparent"/>
                                        </HorizontalStackLayout>
                                        
                                        </Grid>
                                        <!-- Progress bar -->
                                        <ProgressBar Progress="{Binding ProgressValue}" HeightRequest="6" BackgroundColor="#E0E0E0" ProgressColor="#4CAF50"/>

                                        
                                    </VerticalStackLayout>
                                </Frame>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>


                <!-- Weekly Goals -->
                <Label Text="Weekly Goals" FontSize="22" FontAttributes="Bold" TextColor="DarkBlue" Margin="0,20,0,0" />
                <CollectionView x:Name="WeeklyGoalsList">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame BackgroundColor="#E8F5E9" CornerRadius="10" Padding="10" Margin="5">
                                    <VerticalStackLayout Spacing="6">
                                        <!-- Goal text and numeric progress -->
                                        <Grid ColumnDefinitions="*,Auto,Auto" VerticalOptions="Center">
                                            <Label Text="{Binding Category}" FontSize="18" TextColor="Black" Grid.Column="0"/>
                                            <Label Text="{Binding ProgressText}" FontSize="16" TextColor="Black" Grid.Column="1" HorizontalTextAlignment="End"/>
                                        <!-- Edit/Delete buttons -->
                                        
                                        <HorizontalStackLayout Spacing="8" HorizontalOptions="End">

                                    
                                   
                                        <Label Text="{Binding Progress}" FontSize="16" TextColor="Black" VerticalOptions="Center" Grid.Column="1"/>
                                            <Button Text="✓" Clicked="OnGoalCompleteClicked" WidthRequest="40" HeightRequest="40" Grid.Column="2"/>
                                            <ImageButton Source="edit_icon.png" CommandParameter="{Binding .}" Clicked="OnRenameGoalClicked" WidthRequest="26" HeightRequest="26" BackgroundColor="Transparent"/>
                                            <ImageButton Source="trash_icon.png" CommandParameter="{Binding .}" Clicked="OnDeleteGoalClicked" WidthRequest="26" HeightRequest="26" BackgroundColor="Transparent"/>
                                        </HorizontalStackLayout>
                                        
                                        </Grid>
                                        <!-- Progress bar -->
                                        <ProgressBar Progress="{Binding ProgressValue}" HeightRequest="6" BackgroundColor="#E0E0E0" ProgressColor="#4CAF50"/>

                                        
                                    </VerticalStackLayout>
                                </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>


                <!-- Monthly Goals -->
                <Label Text="Monthly Goals" FontSize="22" FontAttributes="Bold" TextColor="Purple" Margin="0,20,0,0" />
                <CollectionView x:Name="MonthlyGoalsList">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame BackgroundColor="#E8F5E9" CornerRadius="10" Padding="10" Margin="5">
                                    <VerticalStackLayout Spacing="6">
                                        <!-- Goal text and numeric progress -->
                                        <Grid ColumnDefinitions="*,Auto,Auto" VerticalOptions="Center">
                                            <Label Text="{Binding Category}" FontSize="18" TextColor="Black" Grid.Column="0"/>
                                            <Label Text="{Binding ProgressText}" FontSize="16" TextColor="Black" Grid.Column="1" HorizontalTextAlignment="End"/>
                                        <!-- Edit/Delete buttons -->
                                        
                                        <HorizontalStackLayout Spacing="8" HorizontalOptions="End">

                                    
                                   
                                        <Label Text="{Binding Progress}" FontSize="16" TextColor="Black" VerticalOptions="Center" Grid.Column="1"/>
                                            <Button Text="✓" Clicked="OnGoalCompleteClicked" WidthRequest="40" HeightRequest="40" Grid.Column="2"/>
                                            <ImageButton Source="edit_icon.png" CommandParameter="{Binding .}" Clicked="OnRenameGoalClicked" WidthRequest="26" HeightRequest="26" BackgroundColor="Transparent"/>
                                            <ImageButton Source="trash_icon.png" CommandParameter="{Binding .}" Clicked="OnDeleteGoalClicked" WidthRequest="26" HeightRequest="26" BackgroundColor="Transparent"/>
                                        </HorizontalStackLayout>
                                        
                                        </Grid>
                                        <!-- Progress bar -->
                                        <ProgressBar Progress="{Binding ProgressValue}" HeightRequest="6" BackgroundColor="#E0E0E0" ProgressColor="#4CAF50"/>

                                        
                                    </VerticalStackLayout>
                                </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
                
                <!-- Add Goals Item Button -->
                <Button Text="Add New Goal"
                        BackgroundColor="#2196F3"
                        TextColor="White"
                        CornerRadius="10"
                        HeightRequest="50"
                        Clicked="OnAddGoalsItemClicked" />

            </VerticalStackLayout>
        </ScrollView>

        <!-- Bottom Nav Bar -->
        <Grid Grid.Row="1" ColumnDefinitions="*,*,*">
            <Button Text="Budgets" Grid.Column="0" HeightRequest="80" FontSize="Header" Clicked="OnBudgetClicked" />
            <Button Text="Home" Grid.Column="1" HeightRequest="80" FontSize="Header" Clicked="OnMainClicked"/>
            <Button Text="Goals" Grid.Column="2" HeightRequest="80" FontSize="Header" Clicked="OnGoalsClicked" />
        </Grid>
    </Grid>
</ContentPage>
